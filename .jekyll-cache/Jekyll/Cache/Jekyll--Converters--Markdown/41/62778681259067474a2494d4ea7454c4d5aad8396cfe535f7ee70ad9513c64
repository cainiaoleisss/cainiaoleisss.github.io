I"™<h1 id="docker-ç®€å•åº”ç”¨">Docker ç®€å•åº”ç”¨</h1>

<p>Docker æ˜¯ä¸€ä¸ªåŸºäº Go è¯­è¨€ å¹¶éµä» Apache2.0 åè®®å¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæˆ–Windows æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p>

<h2 id="dockerçš„åº”ç”¨åœºæ™¯">Dockerçš„åº”ç”¨åœºæ™¯</h2>

<ul>
  <li>Web åº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒã€‚</li>
  <li>è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒã€‚</li>
  <li>åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ã€‚</li>
  <li>ä»å¤´ç¼–è¯‘æˆ–è€…æ‰©å±•ç°æœ‰çš„ OpenShift æˆ– Cloud Foundry å¹³å°æ¥æ­å»ºè‡ªå·±çš„ PaaS ç¯å¢ƒã€‚</li>
</ul>

<h2 id="ä¸‹é¢ä»‹ç»åœ¨ubuntuä¸Šdockerçš„å®‰è£…">ä¸‹é¢ä»‹ç»åœ¨Ubuntuä¸ŠDockerçš„å®‰è£…</h2>

<ol>
  <li>
    <h3 id="å¸è½½æ—§ç‰ˆæœ¬">å¸è½½æ—§ç‰ˆæœ¬</h3>
  </li>
</ol>

<p>Docker çš„æ—§ç‰ˆæœ¬è¢«ç§°ä¸º dockerï¼Œdocker.io æˆ– docker-engine ã€‚å¦‚æœå·²å®‰è£…ï¼Œè¯·å¸è½½å®ƒä»¬</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get remove docker docker-engine docker.io containerd runc
</code></pre></div></div>

<ol>
  <li>
    <h3 id="ä½¿ç”¨-docker-ä»“åº“è¿›è¡Œå®‰è£…">ä½¿ç”¨ Docker ä»“åº“è¿›è¡Œå®‰è£…</h3>
  </li>
</ol>

<p>æ›´æ–° apt åŒ…</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
</code></pre></div></div>

<p>é€šè¿‡HTTPSä½¿ç”¨ä»“åº“(repository)å®‰è£…ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>apt-transport-https ca-certificates curl software-properties-common
</code></pre></div></div>

<p>åœ¨/etc/apt/sources.list.d/docker.listæ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢å†…å®¹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deb <span class="o">[</span><span class="nb">arch</span><span class="o">=</span>amd64] https://download.docker.com/linux/ubuntu bionic stable
</code></pre></div></div>

<p>æ·»åŠ Dockerå®˜æ–¹çš„GPGå¯†é’¥ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg | <span class="nb">sudo </span>apt-key add -
</code></pre></div></div>

<p>å®‰è£…ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>docker-ce
</code></pre></div></div>

<ol>
  <li>
    <h3 id="éªŒè¯docker">éªŒè¯Docker</h3>
  </li>
</ol>

<p>æŸ¥çœ‹dockeræœåŠ¡æ˜¯å¦å¯åŠ¨</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl status docker
</code></pre></div></div>

<p><img src="http://39.97.112.80:8080/pic/image-20191218145406129.png" alt="image-20191218145406129" /></p>

<p>è‹¥æœªå¯åŠ¨åˆ™å¯åŠ¨</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start docker
</code></pre></div></div>

<p>é…ç½®é•œåƒæºï¼Œç›´æ¥ä»dockerhubä¸‹è½½é•œåƒå¤ªæ…¢, éœ€è¦é…ç½®å›½å†…é•œåƒæº, ä¿®æ”¹daemon.jsonæ–‡ä»¶</p>

<p>PSï¼šï¼ˆæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰ï¼Œéœ€è‡ªè¡Œåˆ›å»ºï¼‰</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /etc/docker/daemon.json
</code></pre></div></div>

<p>æ·»åŠ é•œåƒæºï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸­ç§‘å¤§çš„é•œåƒæº</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn/"]
}  
</code></pre></div></div>

<h2 id="ä¸‹é¢ä»‹ç»dockeré…ç½®tomcat">ä¸‹é¢ä»‹ç»Dockeré…ç½®tomcat</h2>

<ol>
  <li>
    <h3 id="æœç´¢tomcaté•œåƒ">æœç´¢tomcaté•œåƒ</h3>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker search tomcat
</code></pre></div></div>

<p><img src="http://39.97.112.80:8080/pic/image-20191218150238137.png" alt="image-20191218150238137" /></p>

<ol>
  <li>
    <h3 id="è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªæ‹‰å–tomcaté•œåƒ">è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œæ‹‰å–tomcaté•œåƒ</h3>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull tomcat
</code></pre></div></div>

<p><img src="http://39.97.112.80:8080/pic/image-20191218150859056.png" alt="image-20191218150859056" /></p>

<ol>
  <li>
    <h3 id="åˆ›å»ºtomcatå®¹å™¨">åˆ›å»ºtomcatå®¹å™¨</h3>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">--name</span> tomcat <span class="nt">-v</span> /etc/localtime:/etc/localtime <span class="nt">-p</span> 8090:8080 tomcat:latest
<span class="c"># â€“name å®¹å™¨åç§°</span>
<span class="c"># -p 8090:8080 8090 æ˜¯å®¿ä¸»æœºç«¯å£ 8080æ˜¯tomcatå®¹å™¨ç«¯å£ 8080æ˜ å°„åˆ°8090</span>
<span class="c">#  tomcat:latest é•œåƒåç§°åŠç‰ˆæœ¬</span>
<span class="c"># -v /etc/localtime:/etc/localtime å®¹å™¨ä½¿ç”¨å®¿ä¸»æœºæ—¶é—´ã€æ—¶åŒº</span>
</code></pre></div></div>

<ol>
  <li>
    <h3 id="æŸ¥çœ‹tomcatè¿è¡Œæƒ…å†µ">æŸ¥çœ‹tomcatè¿è¡Œæƒ…å†µ</h3>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps
</code></pre></div></div>

<p><img src="http://39.97.112.80:8080/pic/image-20191218151419265.png" alt="image-20191218151419265" /></p>

<ol>
  <li>
    <h3 id="å¤–éƒ¨è®¿é—®">å¤–éƒ¨è®¿é—®</h3>
  </li>
</ol>

<p><img src="http://39.97.112.80:8080/pic/image-20191218151530102.png" alt="image-20191218151530102" /></p>

<p>çœ‹åˆ°è®¿é—®æˆåŠŸ</p>

<h3 id="6é…ç½®waråŒ…">6.é…ç½®waråŒ…</h3>

<p>é¦–å…ˆè¿›å…¥å®¹å™¨ï¼ˆä¸­é—´å¡«å†™è‡ªå·±çš„container idï¼‰</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> 67094cc6cb3d /bin/bash
</code></pre></div></div>

<p><img src="http://39.97.112.80:8080/pic/image-20191218151731935.png" alt="image-20191218151731935" /></p>

<p>é€€å‡º</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">exit</span>
</code></pre></div></div>

<p>ä¸Šä¼ waråŒ…åˆ°è‡ªå·±æœåŠ¡å™¨ï¼ˆä¸æ¼”ç¤ºï¼‰</p>

<p>å°†waråŒ…ä¸Šä¼ åˆ°dockeré•œåƒé‡Œ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">cp </span>BookStore.war tomcat:/usr/local/tomcat/webapps
<span class="c"># docker cp :ç”¨äºå®¹å™¨ä¸ä¸»æœºä¹‹é—´çš„æ•°æ®æ‹·è´ã€‚</span>
<span class="c"># docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</span>
<span class="c"># docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span>
<span class="c"># OPTIONSè¯´æ˜  -L :ä¿æŒæºç›®æ ‡ä¸­çš„é“¾æ¥</span>
</code></pre></div></div>

<ol>
  <li>
    <h3 id="é‡å¯é•œåƒ">é‡å¯é•œåƒ</h3>
  </li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker restart 67094cc6cb3d
</code></pre></div></div>

<ol>
  <li>
    <h3 id="å¤–éƒ¨è®¿é—®-1">å¤–éƒ¨è®¿é—®</h3>
  </li>
</ol>

<p><img src="http://39.97.112.80:8080/pic/image-20191218152411842.png" alt="image-20191218152411842" /></p>
:ET